;bandit trader
[logic@val_smart_terrain_7_4_bandit_trader]
suitable = {=check_npc_name(val_smart_terrain_7_4_bandit_trader_stalker)} true
prior = 200
active = animpoint@trade
level_spot = trader
trade = misc\trade\trade_bandit.ltx
dont_keep_items = true
can_select_weapon = false

[animpoint@trade]
cover_name = val_smart_terrain_7_4_bandit_trader_smart_cover
reach_movement = walk_noweap
avail_animations = animpoint_sit_normal
reach_distance = 3
;on_info = {!npc_in_zone(val_gunnery_zone)} %=teleport_npc(val_smart_terrain_trader_walker_2_walk)%
combat_ignore_cond = {=fighting_dist_ge(7) !health_le(0.98) !check_enemy_name(actor)} true, false
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false
meet = meet@trade
on_info1 = {=obj_on_job(val_smart_terrain_7_4:val_smart_terrain_7_4_beh_trade_1) =job_on_point(val_smart_terrain_7_4:val_smart_terrain_7_4_beh_trade_1:1:2:false)} %=trade_job_give_id(val_smart_terrain_7_4:val_smart_terrain_7_4_beh_trade_1)%

[meet@trade]
close_snd_hello = val_bandit_trader_meet
close_snd_bye = val_bandit_trader_bye
close_anim 		= nil
close_victim 	= nil
far_anim 		= nil
far_victim 		= nil
close_distance  = 0
far_distance 	= 0
close_snd_distance = 3
use = {=actor_enemy} false, true
meet_on_talking = false
allow_break = false

;------------------------------
;------- Mutant swarm ----------
;------------------------------

[logic@faction_base_defense_enemy1]
active = mob_home@faction_base_defense_enemy1
suitable = {=target_squad_name(faction_base_defense_flesh_squad)} true
monster_job = true
prior = 200

[mob_home@faction_base_defense_enemy1]
path_home = home_attackers
home_min_radius = 1
home_max_radius = 30
aggressive = true
panic = 0

[logic@faction_base_defense_enemy2]
active = mob_home@faction_base_defense_enemy2
suitable = {=target_squad_name(faction_base_defense_boar_squad)} true
monster_job = true
prior = 200

[mob_home@faction_base_defense_enemy2]
path_home = home_attackers
aggressive = true
home_min_radius = 1
home_max_radius = 30
panic = 0

[logic@faction_base_defense_enemy3]
active = mob_home@faction_base_defense_enemy3
suitable = {=target_squad_name(faction_base_defense_dog_squad)} true
monster_job = true
prior = 200

[mob_home@faction_base_defense_enemy3]
path_home = home_attackers
home_min_radius = 1
home_max_radius = 30
aggressive = true
panic = 0

[logic@faction_base_defense_enemy4]
active = mob_home@faction_base_defense_enemy4
suitable = {=target_squad_name(faction_base_defense_flesh_second_squad)} true
monster_job = true
prior = 200

[mob_home@faction_base_defense_enemy4]
path_home = home_attackers_2
home_min_radius = 1
home_max_radius = 30
aggressive = true
panic = 0

[logic@faction_base_defense_enemy5]
active = mob_home@faction_base_defense_enemy5
suitable = {=target_squad_name(faction_base_defense_boar_second_squad)} true
monster_job = true
prior = 200

[mob_home@faction_base_defense_enemy5]
path_home = home_attackers_2
aggressive = true
home_min_radius = 1
home_max_radius = 30
panic = 0

[logic@faction_base_defense_enemy6]
active = mob_home@faction_base_defense_enemy6
suitable = {=target_squad_name(faction_base_defense_dog_second_squad)} true
monster_job = true
prior = 200

[mob_home@faction_base_defense_enemy6]
path_home = home_attackers_2
home_min_radius = 1
home_max_radius = 30
aggressive = true
panic = 0


;---------------------------------------
;---------------НОВОЕ:
;---------------------------------------

;вышка за магазином
[logic@watchtower]
active = walker@watchtower
suitable = true
prior = 90

[walker@watchtower]
path_walk = watchtower_walk
path_look = watchtower_look


;вышка с-в базы
[logic@watchtower2]
active = walker@watchtower2
suitable = true
prior = 90

[walker@watchtower2]
path_walk = watchtower2_walk
path_look = watchtower2_look

;на входе в базу
[logic@guard_2]
active = walker@guard_2
suitable = true
prior = 60

[walker@guard_2]
path_walk = guard_2_walk
path_look = guard_2_look


;возле кухни
[logic@walker_1]
active = walker@walker_1
suitable = true
prior = 60

[walker@walker_1]
path_walk = walker_1_walk
path_look = walker_1_look


;возле кухни
[logic@walker_2]
active = walker@walker_2
suitable = true
prior = 60

[walker@walker_2]
path_walk = walker_2_walk
path_look = walker_2_look


;возле кухни
[logic@walker_5]
active = walker@walker_5
suitable = true
prior = 60

[walker@walker_5]
path_walk = walker_5_walk
path_look = walker_5_look


;возле кухни
[logic@walker_6]
active = walker@walker_6
suitable = true
prior = 60

[walker@walker_6]
path_walk = walker_6_walk
path_look = walker_6_look


;с-з базы
[logic@walker_7]
active = walker@walker_7
suitable = true
prior = 90

[walker@walker_7]
path_walk = walker_7_walk
path_look = walker_7_look




;---------------------------------------
;---------------ЛИДЕР БАНДИТОВ
;---------------------------------------
[logic@val_bandit_boss]
active = walker@val_bandit_boss 
suitable = {=check_npc_name(zat_b7_bandit_boss_sultan)} true
prior = 200
level_spot = quest_npc


[walker@val_bandit_boss]

path_walk = bandits_leader_walk
path_look = bandits_leader_look

use_camp = false
meet = meet@val_bandit_boss
combat_ignore_cond = {=fighting_dist_ge(7) !health_le(0.98) !check_enemy_name(actor)} true, false
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false

[meet@val_bandit_boss]
close_snd_hello = zat_b7_bandit_boss_sultan_greeting
close_snd_bye = zat_b7_bandit_boss_sultan_farewell
close_anim 		= nil
close_victim 	= nil
far_anim 		= nil
far_victim 		= nil
close_distance  = 0
far_distance 	= 0
use = {=actor_enemy} false, true
trade_enable = false
allow_break = false
close_snd_distance = 3
meet_dialog	= {-zat_b7_bandit_boss_sultan_intro} zat_b7_bandit_boss_sultan_intro, {+zat_b30_barmen_got_af +zat_b30_actor_with_sultan -zat_b30_sultan_refuses_af -zat_b30_compass_to_sultan_reversed} zat_b7_bandit_boss_sultan_b30_refuse_af_dialog, {+zat_b30_barmen_got_af +zat_b30_sultan_got_af -zat_b30_sultan_refuses_af -zat_b30_compass_to_sultan_reversed} zat_b7_bandit_boss_sultan_b30_refuse_af_dialog, {+zat_b7_actor_help_bandits -zat_b5_actor_with_bandits} zat_b7_bandit_boss_sultan_b5_give_task_dialog
meet_on_talking = false


;охранник босса
[logic@val_bandit_guard_boss]
active = walker@val_bandit_guard_boss
suitable = {=check_npc_name(val_bandit_guard_boss)} true
prior = 200

[walker@val_bandit_guard_boss]
path_walk = guard_boss_walk
path_look = guard_boss_look
meet = no_meet

;---------------------------------------
;---------------СКРЫТЫЙ ДРАГДИЛЛЕР
;---------------------------------------
[logic@val_bandit_drug]
active = walker@val_bandit_drug 
suitable = {=check_npc_name(val_bandit_drug)} true
prior = 200
level_spot = medic
dont_keep_items = true
trade = misc\trade\trade_val_bandit_drug.ltx
use_wpn		    = false
gather_items_enabled = false
use_camp = false

[walker@val_bandit_drug]

path_walk = bandit_drug_walk
path_look = bandit_drug_look

use_camp = false
meet = meet@val_bandit_drug
combat_ignore_cond = {=fighting_dist_ge(7) !health_le(0.98) !check_enemy_name(actor)} true, false
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false

[meet@val_bandit_drug]
close_snd_hello = nil
close_snd_bye   = nil
close_anim 		= nil
close_victim 	= nil
far_anim 		= nil
far_victim 		= nil
close_distance  = 0
far_distance 	= 0
use = {=actor_enemy} false, true
trade_enable = true
allow_break = false
close_snd_distance = 3
meet_on_talking = false



;---------------------------------------
;---------------БАРМЕН
;---------------------------------------
[logic@bandit_barman]
active = walker@bandit_barman
suitable = {=check_npc_name(base_trader_bandit)} true
combat_ignore_cond = {=fighting_dist_ge(7) !health_le(0.98) !check_enemy_name(actor)} true, false
prior = 200
level_spot = trader
dont_keep_items = true
can_select_weapon = false
trade = misc\trade\trade_val_bandit_barman.ltx
use_wpn		    = false
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false
use_camp = false

[walker@bandit_barman]
path_walk = bandit_barman_walk
path_look = bandit_barman_look
meet = meet@bandit_barman

[meet@bandit_barman]
close_snd_hello = meet_hello
close_snd_bye = meet_stop
close_anim 		= nil
close_victim 	= nil
far_anim 		= nil
far_victim 		= nil
close_distance  = 0
far_distance 	= 0
close_snd_distance = 3
use = {=actor_enemy} false, true
allow_break = false
meet_on_talking = false


;посетители
[logic@bar_visitor_1]
active = walker@bar_visitor_1
suitable = true
prior = 90
combat_ignore_cond = true

[walker@bar_visitor_1]
path_walk = bar_visitor_1_walk
path_look = bar_visitor_1_look
avail_animations = zat_b3_tech_drunk
reach_distance = 2
use_camp = false
meet = meet@drunk


[meet@drunk]
close_snd_hello = nil 
close_snd_bye = nil 
close_anim = nil 
close_victim = nil 
far_anim = nil 
far_victim = nil 
close_distance = 0 
far_distance = 0 
snd_on_use = drunk 
abuse = false 
use = false 
meet_on_talking = false 


[logic@bar_visitor_2]
active = walker@bar_visitor_2
suitable = true
prior = 90
use_camp = true

[walker@bar_visitor_2]
path_walk = bar_visitor_2_walk
path_look = bar_visitor_2_look


[logic@bar_visitor_3]
active = walker@bar_visitor_3
suitable = true
prior = 90
use_camp = true

[walker@bar_visitor_3]
path_walk = bar_visitor_3_walk
path_look = bar_visitor_3_look


[logic@patrol_1]
active = walker@patrol_1
suitable = true
prior = 60
use_camp = true

[walker@patrol_1]
path_walk = patrol_1_walk

;---------------------------------------
;---------------ГОП-СТОП:
;---------------------------------------
[logic@robber_1]
active = walker@robber_1_wait
suitable = {=npc_community(bandit)} true, false
prior = 100
post_combat_time = 0, 0

[walker@robber_1_wait] ;Ждем игрока
;combat_ignore_cond = {=fighting_dist_ge(7) !health_le(0.98) !check_enemy_name(actor)} true, false
path_walk = robber_1_walk
path_look = robber_1_look
def_state_moving1 = walk
def_state_moving2 = rush
on_info = {=is_alive -sim_robbery_end !actor_enemy =dist_to_actor_le(10) !robbed_on_level -gonta_quest_traitor} remark@robber_1_tell_actor
meet = no_meet

[remark@robber_1_tell_actor] ;Видим игрока
target = story | actor
anim = threat_na
meet = no_meet
on_info = %=play_sound(robbery_scene_stop)%
on_game_timer = 50 | beh@robber_1_to_actor

[beh@robber_1_to_actor] ;Идём к игроку
meet = meet@robber_1
gather_items_enabled = false
corpse_detection_enabled = false
behavior_state = beh_move
target = actor
keep_distance = near
near_desired_dist = 1
walk_dist = 5
on_info  = {=has_enemy} walker@robber_1_wait
on_info2 = {+sim_robbery_end} walker@robber_1_wait
on_info3 = {=actor_enemy} walker@robber_1_wait
on_info4 = {=dist_to_actor_ge(10)} %=play_sound(robbery_scene_kill_actor) =set_npc_squad_enemy_to_actor% walker@robber_1_wait

[meet@robber_1] ;Разговариваем с игроком
target = actor
close_distance = 1.5
close_victim = actor
close_anim = threat_na
use = {!actor_enemy =dist_to_actor_le(3)} self, false
meet_dialog = sim_robbery_dialog
allow_break = false
trade_enable = false
on_info = {=has_enemy} walker@robber_1_wait



;---------------------------------------
[logic@robber_2]
active = walker@robber_2_wait
suitable = {=npc_community(bandit)} true, false
prior = 100
post_combat_time = 0, 0

[walker@robber_2_wait] ;Ждем игрока
;combat_ignore_cond = {=fighting_dist_ge(7) !health_le(0.98) !check_enemy_name(actor)} true, false
path_walk = robber_2_walk
path_look = robber_2_look
def_state_moving1 = walk
def_state_moving2 = rush
on_info = {=is_alive -sim_robbery_end !actor_enemy =dist_to_actor_le(10) !robbed_on_level -gonta_quest_traitor} remark@robber_2_tell_actor
meet = no_meet

[remark@robber_2_tell_actor] ;Видим игрока
target = story | actor
anim = threat_na
meet = no_meet
on_info = %=play_sound(robbery_scene_stop)%
on_game_timer = 50 | beh@robber_2_to_actor

[beh@robber_2_to_actor] ;Идём к игроку
meet = meet@robber_2
gather_items_enabled = false
corpse_detection_enabled = false
behavior_state = beh_move
target = actor
keep_distance = near
near_desired_dist = 1
walk_dist = 5
on_info  = {=has_enemy} walker@robber_2_wait
on_info2 = {+sim_robbery_end} walker@robber_2_wait
on_info3 = {=actor_enemy} walker@robber_2_wait
on_info4 = {=dist_to_actor_ge(10)} %=play_sound(robbery_scene_kill_actor) =set_npc_squad_enemy_to_actor% walker@robber_2_wait

[meet@robber_2] ;Разговариваем с игроком
target = actor
close_distance = 1.5
close_victim = actor
close_anim = threat_na
use = {!actor_enemy =dist_to_actor_le(3)} self, false
meet_dialog = sim_robbery_dialog
allow_break = false
trade_enable = false
on_info = {=has_enemy} walker@robber_2_wait



;---------------------------------------
[logic@robber_3]
active = walker@robber_3_wait
suitable = {=npc_community(bandit)} true, false
prior = 100
post_combat_time = 0, 0

[walker@robber_3_wait] ;Ждем игрока
combat_ignore_cond = {=fighting_dist_ge(7) !health_le(0.98) !check_enemy_name(actor)} true, false
path_walk = robber_3_walk
path_look = robber_3_look
def_state_moving1 = walk
def_state_moving2 = rush
on_info = {=is_alive -sim_robbery_end !actor_enemy =dist_to_actor_le(10) !robbed_on_level -gonta_quest_traitor} remark@robber_3_tell_actor
meet = no_meet

[remark@robber_3_tell_actor] ;Видим игрока
target = story | actor
anim = threat_na
meet = no_meet
on_info = %=play_sound(robbery_scene_stop)%
on_game_timer = 50 | beh@robber_3_to_actor

[beh@robber_3_to_actor] ;Идём к игроку
meet = meet@robber_3
gather_items_enabled = false
corpse_detection_enabled = false
behavior_state = beh_move
target = actor
keep_distance = near
near_desired_dist = 1
walk_dist = 5
on_info = {=dist_to_actor_ge(10)} %=play_sound(robbery_scene_kill_actor) =set_npc_squad_enemy_to_actor% walker@wait
on_info2 = {+sim_robbery_end} walker@wait
on_info3 = {=actor_enemy} walker@wait
on_info4 = {=has_enemy} walker@wait

[meet@robber_3] ;Разговариваем с игроком
target = actor
close_distance = 1.5
close_victim = actor
close_anim = threat_na
use = {!actor_enemy =dist_to_actor_le(3)} self, false
meet_dialog = sim_robbery_dialog
allow_break = false
trade_enable = false
on_info = {=has_enemy} walker@wait
